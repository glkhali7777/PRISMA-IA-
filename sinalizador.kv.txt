#:kivy 2.1.0

# Define cores para usar em todo o app
<Colors>:
    bg_main: 0.058, 0.09, 0.164, 1       # Cor de fundo principal
    bg_secondary: 0.117, 0.16, 0.23, 1  # Cor de fundo secund√°ria
    card: 0.2, 0.254, 0.333, 1          # Cor dos cart√µes
    primary: 0.145, 0.388, 0.92, 1      # Azul prim√°rio
    green: 0.062, 0.725, 0.505, 1       # Verde
    red: 0.937, 0.266, 0.266, 1         # Vermelho
    yellow: 0.96, 0.62, 0.043, 1        # Amarelo
    text_primary: 0.972, 0.98, 0.988, 1 # Texto principal
    text_secondary: 0.58, 0.639, 0.72, 1# Texto secund√°rio

# Estilo customizado para os T√≠tulos dos cart√µes
<CardTitle@Label>:
    font_size: '16sp'
    bold: True
    halign: 'left'
    valign: 'middle'
    size_hint_y: None
    height: self.texture_size[1]
    padding_x: 20

# Estilo customizado para os bot√µes principais
<MainButton@Button>:
    font_size: '16sp'
    size_hint_y: None
    height: '48dp'
    background_normal: ''
    background_color: Ctx.colors.primary

TabbedPanel:
    do_default_tab: False
    tab_pos: 'top_mid'
    background_color: Ctx.colors.bg_secondary

    TabbedPanelItem:
        text: 'üìä Dashboard'
        BoxLayout:
            orientation: 'vertical'
            padding: 10
            spacing: 10
            canvas.before:
                Color:
                    rgba: Ctx.colors.bg_main
                Rectangle:
                    pos: self.pos
                    size: self.size

            # M√©tricas no Topo
            GridLayout:
                cols: 2
                size_hint_y: 0.3
                spacing: 10
                BoxLayout: # Card Saldo
                    orientation: 'vertical'
                    Label:
                        text: 'SALDO'
                    Label:
                        id: saldo_label
                        text: '$0.00'
                        font_size: '24sp'
                        bold: True
                        color: Ctx.colors.green
                BoxLayout: # Card Lucro
                    orientation: 'vertical'
                    Label:
                        text: 'LUCRO TOTAL'
                    Label:
                        id: lucro_label
                        text: '$+0.00'
                        font_size: '24sp'
                        bold: True
                        color: Ctx.colors.primary
                BoxLayout: # Card Acerto
                    orientation: 'vertical'
                    Label:
                        text: 'TAXA DE ACERTO'
                    Label:
                        id: acerto_label
                        text: '0.0%'
                        font_size: '24sp'
                        bold: True
                        color: Ctx.colors.yellow
                BoxLayout: # Card Opera√ß√µes
                    orientation: 'vertical'
                    Label:
                        text: 'OPERA√á√ïES'
                    Label:
                        id: operacoes_label
                        text: '0W / 0L'
                        font_size: '24sp'
                        bold: True

            # Status do Bot
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.7
                padding: 10
                CardTitle:
                    text: 'Status do Bot'
                Label:
                    id: conexao_label
                    text: 'Conex√£o: Desconectado'
                    color: Ctx.colors.red
                Label:
                    id: trading_label
                    text: 'Trading: Parado'
                Label:
                    id: conta_label
                    text: 'Conta: -'
                
                # Bot√µes
                Button:
                    id: connect_btn
                    text: 'üîó Conectar √† Exnova'
                    on_press: app.connect_real_exnova()
                Button:
                    id: trading_btn
                    text: '‚ñ∂Ô∏è Iniciar Trading'
                    background_color: Ctx.colors.green
                    on_press: app.toggle_real_trading()

    TabbedPanelItem:
        text: '‚öôÔ∏è Configura√ß√µes'
        ScrollView:
            GridLayout:
                cols: 1
                spacing: 10
                padding: 10
                size_hint_y: None
                height: self.minimum_height
                
                CardTitle:
                    text: 'Credenciais da Exnova'
                TextInput:
                    id: email_input
                    hint_text: 'Email'
                TextInput:
                    id: password_input
                    hint_text: 'Senha'
                    password: True
                Spinner:
                    id: account_type_spinner
                    text: 'Tipo de Conta'
                    values: ['PRACTICE', 'REAL']
                
                CardTitle:
                    text: 'Gerenciamento de Risco'
                TextInput:
                    id: entry_value_input
                    hint_text: 'Valor de Entrada ($)'
                    input_filter: 'float'
                TextInput:
                    id: stop_win_input
                    hint_text: 'Stop Win ($)'
                    input_filter: 'float'
                TextInput:
                    id: stop_loss_input
                    hint_text: 'Stop Loss ($)'
                    input_filter: 'float'

                CardTitle:
                    text: 'Configura√ß√£o de Trading'
                Spinner:
                    id: strategy_spinner
                    text: 'Estrat√©gia'
                    # Os valores ser√£o preenchidos pelo Python
                
                MainButton:
                    text: 'üíæ Salvar Configura√ß√µes'
                    on_press: app.save_real_config()